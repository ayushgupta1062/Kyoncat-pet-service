{% extends 'website/base.html' %}
{% load static %}
{% block title %}Expert & Professional Pet Care Services in Bengaluru - Kyonkat Groomers{% endblock %}
{% block keyword %}{{page_keywords|default:''}}{% endblock %}
{% block description %}Looking for expert pet care in Bengaluru? Kyonkat Groomers offers professional pet care services, from grooming to wellness. Trust our expert pet care team today!{% endblock %}
{% block css %}{% endblock %}
{% block content %}

    {% include 'website/header.html' %}


        {% if config.use_layout_two %}
        <!-- main banner start -->
        <div class="main_banner responsive-banner" style="background-image: url({{config.banner_image_one.url}});">
            <div class="bg-overlay">
              <div class="custom-container-fluid">
                  <div class="main_banner_row">
                      <div class="mian_banner_text">
                        <h2>{{config.banner_sub_title}}</h2>
                        <h1>{{config.banner_title}}</h1>
                        <p>{{config.banner_content|safe}}</p>
                      </div>
                  </div>        
              </div>
                <div id="divider_id" class="website-divider-container-500113">
                    <svg xmlns="http://www.w3.org/2000/svg" class="divider-img-500113" viewBox="0 0 1080 137" preserveAspectRatio="none">
                    <path d="M 0,137 V 59.03716 c 158.97703,52.21241 257.17659,0.48065 375.35967,2.17167 118.18308,1.69101 168.54911,29.1665 243.12679,30.10771 C 693.06415,92.25775 855.93515,29.278599 1080,73.61449 V 137 Z" style="opacity:0.85"></path>
                    </svg>     
                </div>
             </div> 
          </div>
          <!-- main banner end-->
        {% else %}
            <!-- main banner start -->
            <div class="main_banner top_banner">
                <div class="bg_layer">
                    <div class="custom-container-fluid">
                        <div class="main_banner_row">
                            <div class="mian_banner_text">
                                <h2>{{config.banner_sub_title}}</h2>
                                <h1>{{config.banner_title}}</h1>
                                <p>{{config.banner_content|safe}}</p>
                            </div>
                            <div class="banner_fig_slider">
                                {% if config.banner_image_one %}
                                    <div>
                                        <div class="mian_banner_fig">
                                            <figure>
                                                <img src="{{config.banner_image_one.url}}">
                                            </figure>
                                        </div>
                                    </div>
                                {% endif %}
                                {% if config.banner_image_two %}
                                    <div>
                                        <div class="mian_banner_fig">
                                            <figure>
                                                <img src="{{config.banner_image_two.url}}">
                                            </figure>
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div id="divider_id" class="website-divider-container-500113">

                        <svg xmlns="http://www.w3.org/2000/svg" class="divider-img-500113" viewBox="0 0 1080 137"
                            preserveAspectRatio="none">
                            <path
                                d="M 0,137 V 59.03716 c 158.97703,52.21241 257.17659,0.48065 375.35967,2.17167 118.18308,1.69101 168.54911,29.1665 243.12679,30.10771 C 693.06415,92.25775 855.93515,29.278599 1080,73.61449 V 137 Z"
                                style="opacity:0.85"></path>
                        </svg>

                    </div>
                </div>
            </div>
            <!-- main banner end-->
        {% endif %}
        
    {% for page_content in content %}    
        {% for data in page_content.sectiondefault_set.all %}
        
            {% if data.is_active and data.is_valid %}
            {% if data.is_html %} 
                {{data.content|safe}}
            {% else %}
                {% if data.image_position == 0 %}            
                <!-- pet about wrap start -->
                <section class="pet_about_wrap">
                    <div class="custom-container">
                        <div class="pet_about_row">
                            <div class="pet_about_text">
                                <h3>{{data.sub_title}}</h3>
                                <h2>{{data.title|safe}}</h2>
                                {{data.content|safe}}
                            </div>
                        </div>
                    </div>
                </section> 
                <!-- pet about wrap end -->      
                {% endif %}
                {% if data.image_position == 1 %}            
                <!-- pet about wrap start -->
                <section class="pet_about_wrap">
                    <div class="custom-container">
                        <div class="pet_about_row">
                        <div class="pet_about_fig">
                                <figure>
                                    {% if data.image_directory %}
                                    <img src="{{data.image_directory.image.url}}" alt="{{data.title}}">
                                    {% elif data.image %}
                                    <img src="{{data.image.url}}" alt="{{data.title}}">
                                    {% endif %}
                                </figure>  
                            </div>
                            <div class="pet_about_text">
                                <h3>{{data.sub_title}}</h3>
                                <h2>{{data.title}}</h2>
                                {{data.content|safe}}
                            </div>
                        </div>
                    </div>
                </section> 
                <!-- pet about wrap end -->       
                {% endif %}
                {% if data.image_position == 2 %}
                <!-- pet about wrap start -->
                <section class="pet_about_wrap">
                    <div class="custom-container">
                        <div class="pet_about_row">
                            <div class="pet_about_text">
                                <h3>{{data.sub_title}}</h3>
                                <h2>{{data.title}}</h2>
                                {{data.content|safe}}
                            </div>
                            <div class="pet_about_fig">
                                <figure>
                                    {% if data.image_directory %}
                                    <img src="{{data.image_directory.image.url}}" alt="{{data.title}}">
                                    {% elif data.image %}
                                    <img src="{{data.image.url}}" alt="{{data.title}}">
                                    {% endif %}
                                </figure>  
                            </div>
                        </div>
                    </div>
                </section> 
                <!-- pet about wrap end -->  
                {% endif %}
            {% endif %}
            {% endif %}
        {% endfor %}
    {% endfor %}

    {% include 'website/footer.html' %}

{% endblock %}
{% block js %}
<script type="text/javascript">
  // Make the existing "Book Appointment" banner button (from CMS content) clickable.
  (function(){
    var bookingUrl = "{% url 'w_booking' %}";

    function looksLikeBookingCta(el){
      var text = (el.textContent || el.innerText || "").trim().toLowerCase();
      return text.indexOf("book appointment") !== -1 || 
             text.indexOf("book apointment") !== -1 || 
             text === "book now" ||
             text.indexOf("appointment") !== -1;
    }

    // Wait for DOM to be fully loaded
    document.addEventListener("DOMContentLoaded", function(){
      // search only inside banner text to avoid changing other links
      var containers = document.querySelectorAll(".mian_banner_text");
      containers.forEach(function(c){
        // Find any element that looks like a Book Appointment button
        var allElements = c.querySelectorAll("a, button, div, span, p");
        allElements.forEach(function(el){
          if(looksLikeBookingCta(el)){
            var tag = (el.tagName || "").toLowerCase();
            
            // If it's an anchor, fix the href
            if(tag === "a"){
              var href = el.getAttribute("href") || "";
              if(!href || href === "#" || href === "javascript:void(0)" || href.indexOf("booking") === -1){
                el.setAttribute("href", bookingUrl);
                el.style.cursor = "pointer";
              }
            } 
            // If it's a button or div/span/p, make it clickable
            else if(tag === "button" || el.classList.contains("main_button") || el.style.cursor === "pointer" || el.parentElement && el.parentElement.classList.contains("main_button")){
              el.style.cursor = "pointer";
              el.addEventListener("click", function(e){
                e.preventDefault();
                e.stopPropagation();
                window.location.href = bookingUrl;
              });
            }
            // For other elements, check if they're inside a clickable container
            else {
              // Make parent clickable if it has button-like styling
              var parent = el.parentElement;
              if(parent && (parent.classList.contains("main_button") || parent.style && parent.style.cursor === "pointer")){
                parent.style.cursor = "pointer";
                parent.addEventListener("click", function(e){
                  if(e.target === el || e.target.closest(".mian_banner_text p")){
                    e.preventDefault();
                    e.stopPropagation();
                    window.location.href = bookingUrl;
                  }
                });
              } else {
                // Make the element itself clickable
                el.style.cursor = "pointer";
                el.addEventListener("click", function(e){
                  e.preventDefault();
                  e.stopPropagation();
                  window.location.href = bookingUrl;
                });
              }
            }
          }
        });
      });

      // Additional safety net: catch clicks on Book Appointment text anywhere in banner
      document.addEventListener("click", function(e){
        var el = e.target;
        // Check up to 5 parent levels
        for(var i=0; i<5 && el; i++, el = el.parentElement){
          if(!el) break;
          
          // Only process if inside banner text area
          if(!el.closest(".mian_banner_text")) continue;
          
          var tag = (el.tagName || "").toLowerCase();
          var text = (el.textContent || el.innerText || "").trim().toLowerCase();
          
          if(looksLikeBookingCta(el) || (text && text.indexOf("book appointment") !== -1)){
            // Skip if already has a working href
            if(tag === "a"){
              var href = el.getAttribute("href") || "";
              if(href && href !== "#" && href !== "javascript:void(0)" && href.indexOf("booking") !== -1){
                return; // let default anchor behavior work
              }
            }
            
            e.preventDefault();
            e.stopPropagation();
            window.location.href = bookingUrl;
            return;
          }
        }
      }, true);
    });
  })();
</script>
{% endblock %}